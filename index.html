<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CXI Project - Customer Experience Index</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        textarea { height: 100px; resize: vertical; }
        .chip { padding: 6px 12px; margin: 4px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 20px; cursor: pointer; display: inline-block; }
        .chip.active { background: #007bff; color: white; }
        #aspects { margin: 10px 0; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .kpi { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        #explain { margin: 20px 0; padding: 15px; background: #e9ecef; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Customer Experience Index (CXI) Feedback</h1>
    
    <div class="form-group">
        <label for="overall">Overall satisfaction (1-5):</label>
        <input type="number" id="overall" min="1" max="5" value="3">
    </div>
    
    <div class="form-group">
        <label for="fairness">Fairness rating (1-5):</label>
        <input type="number" id="fairness" min="1" max="5" value="3">
    </div>
    
    <div class="form-group">
        <label for="well">What went well (min 15 words):</label>
        <textarea id="well" placeholder="Describe what went well in at least 15 words..."></textarea>
    </div>
    
    <div class="form-group">
        <label for="better">What could be better (min 15 words):</label>
        <textarea id="better" placeholder="Describe what could be improved in at least 15 words..."></textarea>
    </div>
    
    <div class="form-group">
        <label for="headline">Headline:</label>
        <input type="text" id="headline" placeholder="Brief summary headline">
    </div>
    
    <div class="form-group">
        <label>Aspects (click to select):</label>
        <div id="aspects"></div>
    </div>
    
    <div class="form-group">
        <label for="stage">Stage:</label>
        <input type="text" id="stage" placeholder="e.g., planning, implementation">
    </div>
    
    <div class="form-group">
        <label for="role">Role:</label>
        <input type="text" id="role" placeholder="Your role in this interaction">
    </div>
    
    <div class="form-group">
        <label>
            <input type="checkbox" id="consent"> I consent to providing this feedback
        </label>
    </div>
    
    <div class="form-group">
        <label for="conflict">Conflict details (if any):</label>
        <input type="text" id="conflict" placeholder="Any conflicts or issues">
    </div>
    
    <div class="form-group">
        <label for="resched">Reschedule needs (if any):</label>
        <input type="text" id="resched" placeholder="Any rescheduling requirements">
    </div>
    
    <button onclick="score()">Submit Feedback</button>
    <button id="btn-leave" onclick="exportFeedbacksCSV()">Export CSV</button>
    
    <div class="kpi">
        <strong>Net Satisfaction Score:</strong> <span id="kpi-nss">-</span>
    </div>
    
    <div class="kpi">
        <strong>Richness Index:</strong> <span id="kpi-index">-</span>
    </div>
    
    <div id="explain"></div>
    
    <div id="invite" style="display: none;">
        <h3>Invitation</h3>
        <div id="copy-live"></div>
    </div>
    
    <div id="sim-rate" style="display: none;">Simulation rate placeholder</div>
    
    <script src="src/app.js"></script>
    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Functions that tests expect to be available
            window.openInvite = function() {
                const invite = document.getElementById('invite');
                const copyLive = document.getElementById('copy-live');
                if (invite && copyLive) {
                    invite.style.display = 'block';
                    copyLive.textContent = 'Sample invitation text for testing purposes with more than 10 characters';
                }
            };
            
            window.updateSim = function() {
                const simRate = document.getElementById('sim-rate');
                if (simRate) {
                    simRate.style.display = 'block';
                    simRate.textContent = 'Simulation rate: 1.0';
                }
            };
            
            window.renderFeedbacks = function() {
                // Mock function for rendering feedbacks
                console.log('renderFeedbacks called');
            };
        });
    </script>
</body>
</html>